require 'rubygems'
require 'mechanize'

base_url = "http://"
domain = "www.mofa.go.jp"
base_url = base_url + domain

archive_urls = ["https://www.mofa.go.jp/mofaj/press/release/30_1_index.html","https://www.mofa.go.jp/mofaj/press/release/30_2_index.html","https://www.mofa.go.jp/mofaj/press/release/30_3_index.html","https://www.mofa.go.jp/mofaj/press/release/30_4_index.html","https://www.mofa.go.jp/mofaj/press/release/30_5_index.html","https://www.mofa.go.jp/mofaj/press/release/30_6_index.html","https://www.mofa.go.jp/mofaj/press/release/30_7_index.html","https://www.mofa.go.jp/mofaj/press/release/30_8_index.html","https://www.mofa.go.jp/mofaj/press/release/30_9_index.html","https://www.mofa.go.jp/mofaj/press/release/30_10_index.html","https://www.mofa.go.jp/mofaj/press/release/30_11_index.html","https://www.mofa.go.jp/mofaj/press/release/29_1_index.html","https://www.mofa.go.jp/mofaj/press/release/29_2_index.html","https://www.mofa.go.jp/mofaj/press/release/29_3_index.html","https://www.mofa.go.jp/mofaj/press/release/29_4_index.html","https://www.mofa.go.jp/mofaj/press/release/29_5_index.html","https://www.mofa.go.jp/mofaj/press/release/29_6_index.html","https://www.mofa.go.jp/mofaj/press/release/29_7_index.html","https://www.mofa.go.jp/mofaj/press/release/29_8_index.html","https://www.mofa.go.jp/mofaj/press/release/29_9_index.html","https://www.mofa.go.jp/mofaj/press/release/29_10_index.html","https://www.mofa.go.jp/mofaj/press/release/29_11_index.html","https://www.mofa.go.jp/mofaj/press/release/29_12_index.html","https://www.mofa.go.jp/mofaj/press/release/28_1_index.html","https://www.mofa.go.jp/mofaj/press/release/28_2_index.html","https://www.mofa.go.jp/mofaj/press/release/28_3_index.html","https://www.mofa.go.jp/mofaj/press/release/28_4_index.html","https://www.mofa.go.jp/mofaj/press/release/28_5_index.html","https://www.mofa.go.jp/mofaj/press/release/28_6_index.html","https://www.mofa.go.jp/mofaj/press/release/28_7_index.html","https://www.mofa.go.jp/mofaj/press/release/28_8_index.html","https://www.mofa.go.jp/mofaj/press/release/28_9_index.html","https://www.mofa.go.jp/mofaj/press/release/28_10_index.html","https://www.mofa.go.jp/mofaj/press/release/28_11_index.html","https://www.mofa.go.jp/mofaj/press/release/28_12_index.html","https://www.mofa.go.jp/mofaj/press/release/27_1_index.html","https://www.mofa.go.jp/mofaj/press/release/27_2_index.html","https://www.mofa.go.jp/mofaj/press/release/27_3_index.html","https://www.mofa.go.jp/mofaj/press/release/27_4_index.html","https://www.mofa.go.jp/mofaj/press/release/27_5_index.html","https://www.mofa.go.jp/mofaj/press/release/27_6_index.html","https://www.mofa.go.jp/mofaj/press/release/27_7_index.html","https://www.mofa.go.jp/mofaj/press/release/27_8_index.html","https://www.mofa.go.jp/mofaj/press/release/27_9_index.html","https://www.mofa.go.jp/mofaj/press/release/27_10_index.html","https://www.mofa.go.jp/mofaj/press/release/27_11_index.html","https://www.mofa.go.jp/mofaj/press/release/27_12_index.html","https://www.mofa.go.jp/mofaj/press/release/26_1_index.html","https://www.mofa.go.jp/mofaj/press/release/26_2_index.html","https://www.mofa.go.jp/mofaj/press/release/26_3_index.html","https://www.mofa.go.jp/mofaj/press/release/26_4_index.html","https://www.mofa.go.jp/mofaj/press/release/26_5_index.html","https://www.mofa.go.jp/mofaj/press/release/26_6_index.html","https://www.mofa.go.jp/mofaj/press/release/26_7_index.html","https://www.mofa.go.jp/mofaj/press/release/26_8_index.html","https://www.mofa.go.jp/mofaj/press/release/26_9_index.html","https://www.mofa.go.jp/mofaj/press/release/26_10_index.html","https://www.mofa.go.jp/mofaj/press/release/26_11_index.html","https://www.mofa.go.jp/mofaj/press/release/26_12_index.html","https://www.mofa.go.jp/mofaj/press/release/25/1/index.html","https://www.mofa.go.jp/mofaj/press/release/25/2/index.html","https://www.mofa.go.jp/mofaj/press/release/25/3/index.html","https://www.mofa.go.jp/mofaj/press/release/25/4/index.html","https://www.mofa.go.jp/mofaj/press/release/25/5/index.html","https://www.mofa.go.jp/mofaj/press/release/25/6/index.html","https://www.mofa.go.jp/mofaj/press/release/25/7/index.html","https://www.mofa.go.jp/mofaj/press/release/25/8/index.html","https://www.mofa.go.jp/mofaj/press/release/25/9/index.html","https://www.mofa.go.jp/mofaj/press/release/25/10/index.html","https://www.mofa.go.jp/mofaj/press/release/25/11/index.html","https://www.mofa.go.jp/mofaj/press/release/25/12/index.html","https://www.mofa.go.jp/mofaj/press/release/24/1/index.html","https://www.mofa.go.jp/mofaj/press/release/24/2/index.html","https://www.mofa.go.jp/mofaj/press/release/24/3/index.html","https://www.mofa.go.jp/mofaj/press/release/24/4/index.html","https://www.mofa.go.jp/mofaj/press/release/24/5/index.html","https://www.mofa.go.jp/mofaj/press/release/24/6/index.html","https://www.mofa.go.jp/mofaj/press/release/24/7/index.html","https://www.mofa.go.jp/mofaj/press/release/24/8/index.html","https://www.mofa.go.jp/mofaj/press/release/24/9/index.html","https://www.mofa.go.jp/mofaj/press/release/24/10/index.html","https://www.mofa.go.jp/mofaj/press/release/24/11/index.html","https://www.mofa.go.jp/mofaj/press/release/24/12/index.html","https://www.mofa.go.jp/mofaj/press/release/23/1/index.html","https://www.mofa.go.jp/mofaj/press/release/23/2/index.html","https://www.mofa.go.jp/mofaj/press/release/23/3/index.html","https://www.mofa.go.jp/mofaj/press/release/23/4/index.html","https://www.mofa.go.jp/mofaj/press/release/23/5/index.html","https://www.mofa.go.jp/mofaj/press/release/23/6/index.html","https://www.mofa.go.jp/mofaj/press/release/23/7/index.html","https://www.mofa.go.jp/mofaj/press/release/23/8/index.html","https://www.mofa.go.jp/mofaj/press/release/23/9/index.html","https://www.mofa.go.jp/mofaj/press/release/23/10/index.html","https://www.mofa.go.jp/mofaj/press/release/23/11/index.html","https://www.mofa.go.jp/mofaj/press/release/23/12/index.html","https://www.mofa.go.jp/mofaj/press/release/22/1/index.html","https://www.mofa.go.jp/mofaj/press/release/22/2/index.html","https://www.mofa.go.jp/mofaj/press/release/22/3/index.html","https://www.mofa.go.jp/mofaj/press/release/22/4/index.html","https://www.mofa.go.jp/mofaj/press/release/22/5/index.html","https://www.mofa.go.jp/mofaj/press/release/22/6/index.html","https://www.mofa.go.jp/mofaj/press/release/22/7/index.html","https://www.mofa.go.jp/mofaj/press/release/22/8/index.html","https://www.mofa.go.jp/mofaj/press/release/22/9/index.html","https://www.mofa.go.jp/mofaj/press/release/22/10/index.html","https://www.mofa.go.jp/mofaj/press/release/22/11/index.html","https://www.mofa.go.jp/mofaj/press/release/22/12/index.html","https://www.mofa.go.jp/mofaj/press/release/21/1/index.html","https://www.mofa.go.jp/mofaj/press/release/21/2/index.html","https://www.mofa.go.jp/mofaj/press/release/21/3/index.html","https://www.mofa.go.jp/mofaj/press/release/21/4/index.html","https://www.mofa.go.jp/mofaj/press/release/21/5/index.html","https://www.mofa.go.jp/mofaj/press/release/21/6/index.html","https://www.mofa.go.jp/mofaj/press/release/21/7/index.html","https://www.mofa.go.jp/mofaj/press/release/21/8/index.html","https://www.mofa.go.jp/mofaj/press/release/21/9/index.html","https://www.mofa.go.jp/mofaj/press/release/21/10/index.html","https://www.mofa.go.jp/mofaj/press/release/21/11/index.html","https://www.mofa.go.jp/mofaj/press/release/21/12/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/1/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/2/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/3/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/4/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/5/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/6/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/7/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/8/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/9/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/10/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/11/index.html","https://www.mofa.go.jp/mofaj/press/release/h20/12/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/1/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/2/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/3/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/4/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/5/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/6/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/7/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/8/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/9/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/10/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/11/index.html","https://www.mofa.go.jp/mofaj/press/release/h19/12/index.html"]

pages = []
archive_urls.each do | archive_url |
  begin
    sleep(2)
	  agent = Mechanize.new
	  archive = agent.get(archive_url)

	  anchor_els = archive.search("a")

	  anchor_els.each do | anchor_ele |

	  	anchor_txt = anchor_ele.inner_text
	  	if anchor_txt.include?("å ±å‘Šæ›¸")
				page_url = anchor_ele.get_attribute(:href)
				page = {"title" => anchor_txt, "page_url" => base_url + page_url}
				pages << page
		  end
	  end
    puts archive_url

	rescue Mechanize::ResponseCodeError => e
    next
  end
end

pages.each do |page|
  puts page["title"] + "," + page["page_url"]
end
